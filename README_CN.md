# Instructional Animation - AI æ•™å­¦åŠ¨ç”»ç”Ÿæˆå™¨


ä¸­æ–‡ ï½œ [English](./README.md)

[é¡¹ç›®æºç åœ°å€](https://github.com/wwwzhouhui/in_animation)ï¼š

---

### ğŸ“– é¡¹ç›®ç®€ä»‹

Instructional Animation æ˜¯ä¸€ä¸ªåŸºäºå¤§è¯­è¨€æ¨¡å‹çš„æ•™å­¦åŠ¨ç”»ç”Ÿæˆå·¥å…·ï¼Œèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·è¾“å…¥çš„çŸ¥è¯†ç‚¹ä¸»é¢˜ï¼Œè‡ªåŠ¨ç”Ÿæˆè§†è§‰ç²¾ç¾ã€äº¤äº’æµç•…çš„ HTML5 åŠ¨ç”»é¡µé¢ï¼Œå¹¶æ”¯æŒå¯¼å‡ºä¸º MP4 è§†é¢‘å’Œ GIF æ ¼å¼ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- **ğŸ¤– AI é©±åŠ¨ç”Ÿæˆ**ï¼šåŸºäºå¤§è¯­è¨€æ¨¡å‹è‡ªåŠ¨ç”Ÿæˆç¬¦åˆæ•™å­¦éœ€æ±‚çš„åŠ¨ç”»å†…å®¹
- **ğŸ¨ è§†è§‰ç²¾ç¾**ï¼š2K åˆ†è¾¨ç‡ï¼ˆ1280Ã—720ï¼‰ï¼Œæµ…è‰²ä¸»é¢˜é…è‰²æ–¹æ¡ˆï¼Œä¸“ä¸šè§†è§‰æ•ˆæœ
- **ğŸŒ åŒè¯­æ”¯æŒ**ï¼šä¸­è‹±æ–‡ç•Œé¢åˆ‡æ¢ï¼ŒåŒè¯­å­—å¹•æ˜¾ç¤º
- **ğŸ¬ ä¸€é”®å¯¼å‡º**ï¼šæ”¯æŒå¯¼å‡ºä¸º HTMLã€MP4 è§†é¢‘ã€GIF æ ¼å¼
- **âš¡ æµå¼ç”Ÿæˆ**ï¼šServer-Sent Events (SSE) å®æ—¶æµå¼è¾“å‡ºç”Ÿæˆè¿‡ç¨‹
- **ğŸ¯ å¤šè½®å¯¹è¯**ï¼šæ”¯æŒå¯¹ç”Ÿæˆç»“æœè¿›è¡Œè¿­ä»£ä¼˜åŒ–å’Œè°ƒæ•´
- **ğŸ³ å®¹å™¨åŒ–éƒ¨ç½²**ï¼šDocker ä¸€é”®éƒ¨ç½²ï¼Œæ”¯æŒ Docker Compose

### ğŸ¯ åº”ç”¨åœºæ™¯

- **æ•™è‚²æ•™å­¦**ï¼šä¸ºå­¦ç”Ÿè®²è§£å¤æ‚æ¦‚å¿µï¼ˆæ•°å­¦ã€ç‰©ç†ã€åŒ–å­¦ã€ç”Ÿç‰©ç­‰ï¼‰
- **çŸ¥è¯†åˆ†äº«**ï¼šåˆ¶ä½œç§‘æ™®è§†é¢‘å’Œæ•™ç¨‹åŠ¨ç”»
- **æ¼”ç¤ºæ–‡ç¨¿**ï¼šç”ŸæˆåŠ¨æ€æ¼”ç¤ºæ•ˆæœï¼Œæå‡ PPT è¡¨ç°åŠ›
- **åœ¨çº¿è¯¾ç¨‹**ï¼šå¿«é€Ÿåˆ¶ä½œè¯¾ç¨‹é…å¥—åŠ¨ç”»ç´ æ

### ğŸ› ï¸ æŠ€æœ¯æ ˆ

#### åç«¯
- **FastAPI** - ç°ä»£é«˜æ€§èƒ½ Web æ¡†æ¶
- **OpenAI API** - å…¼å®¹ OpenAI æ¥å£çš„å¤§è¯­è¨€æ¨¡å‹
- **Playwright** - æµè§ˆå™¨è‡ªåŠ¨åŒ–ä¸é¡µé¢å½•åˆ¶
- **FFmpeg** - è§†é¢‘è½¬ç ä¸å¤„ç†
- **Python 3.11** - æ ¸å¿ƒå¼€å‘è¯­è¨€

#### å‰ç«¯
- **HTML5 / CSS3 / JavaScript** - åŸç”Ÿ Web æŠ€æœ¯æ ˆ
- **GSAP** - é«˜æ€§èƒ½åŠ¨ç”»åº“
- **Jinja2** - æ¨¡æ¿å¼•æ“

### ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- **Python**: 3.11+
- **FFmpeg**: ç”¨äºè§†é¢‘å¯¼å‡ºåŠŸèƒ½
- **Chromium**: Playwright æµè§ˆå™¨å¼•æ“
- **æ“ä½œç³»ç»Ÿ**: Linux / macOS / Windows (WSL2)

### ğŸš€ å¿«é€Ÿå¼€å§‹

#### æ–¹å¼ä¸€ï¼šDocker éƒ¨ç½²ï¼ˆæ¨èï¼‰

1. **é…ç½® API å¯†é’¥**

åˆ›å»º `credentials.json` æ–‡ä»¶ï¼š

```json
{
  "API_KEY": "your-api-key-here",
  "BASE_URL": "https://api.example.com/v1",
  "MODEL": "your-model-name"
}
```

2. **å¯åŠ¨æœåŠ¡**

```bash
docker-compose up -d
```

3. **è®¿é—®åº”ç”¨**

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:8000`

#### æ–¹å¼ä¸€.äºŒï¼šä»é•œåƒä»“åº“æ‹‰å–éƒ¨ç½²ï¼ˆDocker Hubï¼‰

æˆ‘ä»¬æä¾›äº†å®˜æ–¹é•œåƒï¼Œä¾¿äºç”¨æˆ·ç›´æ¥ä»é•œåƒä»“åº“è·å–å¹¶éƒ¨ç½²ï¼š`hub.docker.com/r/wwwzhouhui569/in_animation`

1. æ‹‰å–é•œåƒ

```bash
docker pull wwwzhouhui569/in_animation:latest
```

2. å‡†å¤‡é…ç½®æ–‡ä»¶ï¼ˆåœ¨å½“å‰ç›®å½•åˆ›å»º `credentials.json`ï¼‰

```json
{
  "API_KEY": "ä½ çš„APIå¯†é’¥",
  "BASE_URL": "https://api.example.com/v1",
  "MODEL": "ä½ çš„æ¨¡å‹åç§°"
}
```

3. è¿è¡Œå®¹å™¨ï¼ˆå°†å½“å‰ç›®å½•æŒ‚è½½åˆ°å®¹å™¨å†…ï¼‰

```bash
docker run -d \
  --name in_animation \
  -p 8000:8000 \
  -v $(pwd)/credentials.json:/app/credentials.json:ro \
  -v $(pwd)/output:/app/output \
  -e TZ=Asia/Shanghai \
  wwwzhouhui569/in_animation:latest
```

4. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:8000`

å¯é€‰ï¼šå¦‚éœ€è‡ªå®šä¹‰ `ffmpeg` è·¯å¾„æˆ–æ—¶åŒºï¼Œå¯é€šè¿‡ç¯å¢ƒå˜é‡ä¼ å…¥ï¼Œä¾‹å¦‚ï¼š

```bash
docker run -d \
  -p 8000:8000 \
  -e FFMPEG_PATH=/usr/bin/ffmpeg \
  -e TZ=Asia/Shanghai \
  wwwzhouhui569/in_animation:latest
```

#### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘éƒ¨ç½²

1. **å…‹éš†ä»“åº“**

```bash
git clone https://github.com/wwwzhouhui/in_animation.git
cd in_animation
```

2. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ**

```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate     # Windows
```

3. **å®‰è£…ä¾èµ–**

```bash
pip install -r requirements.txt
playwright install chromium
playwright install-deps chromium
```

4. **å®‰è£… FFmpeg**

```bash
# Ubuntu/Debian
sudo apt install ffmpeg

# macOS
brew install ffmpeg

# Windows
# ä¸‹è½½ FFmpeg å¹¶æ·»åŠ åˆ° PATH
```

5. **é…ç½® API å¯†é’¥**

åˆ›å»º `credentials.json`ï¼ˆå‚è€ƒä¸Šæ–¹é…ç½®ï¼‰

6. **å¯åŠ¨æœåŠ¡**

```bash
python app.py
# æˆ–
uvicorn app:app --host 0.0.0.0 --port 8000 --reload
```

7. **è®¿é—®åº”ç”¨**

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:8000`

### ğŸ“ é¡¹ç›®ç»“æ„

```
in_animation/
â”œâ”€â”€ app.py                  # FastAPI ä¸»åº”ç”¨
â”œâ”€â”€ requirements.txt        # Python ä¾èµ–
â”œâ”€â”€ credentials.json        # API é…ç½®ï¼ˆéœ€è‡ªè¡Œåˆ›å»ºï¼‰
â”œâ”€â”€ Dockerfile             # Docker é•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml     # Docker Compose é…ç½®
â”œâ”€â”€ templates/             # Jinja2 æ¨¡æ¿
â”‚   â””â”€â”€ index.html        # å‰ç«¯ä¸»é¡µé¢
â”œâ”€â”€ static/               # é™æ€èµ„æº
â”‚   â”œâ”€â”€ script.js         # å‰ç«¯ JavaScript
â”‚   â”œâ”€â”€ style.css         # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ logo.svg          # Logo å›¾æ ‡
â”‚   â””â”€â”€ favicon.svg       # ç½‘ç«™å›¾æ ‡
â”œâ”€â”€ scripts/              # å·¥å…·è„šæœ¬
â”‚   â””â”€â”€ record_media.py   # é¡µé¢å½•åˆ¶ä¸è§†é¢‘å¯¼å‡º
â”œâ”€â”€ .generated_html/      # ç”Ÿæˆçš„ä¸´æ—¶ HTML æ–‡ä»¶
â”œâ”€â”€ .recordings/          # WebM å½•åˆ¶æ–‡ä»¶
â””â”€â”€ output/               # å¯¼å‡ºçš„è§†é¢‘æ–‡ä»¶ï¼ˆMP4/GIFï¼‰
```

### ğŸ”§ é…ç½®è¯´æ˜

#### credentials.json

```json
{
  "API_KEY": "sk-xxxxxxxxxx",           // LLM API å¯†é’¥ï¼ˆå¿…å¡«ï¼‰
  "BASE_URL": "https://api.example.com/v1",  // API åŸºç¡€ URLï¼ˆå¯é€‰ï¼‰
  "MODEL": "ZhipuAI/GLM-4.6"            // æ¨¡å‹åç§°ï¼ˆå¯é€‰ï¼‰
}
```

æ”¯æŒçš„ LLM æä¾›å•†ï¼š
- OpenAI API
- æ™ºè°± AI (ZhipuAI)
- ModelScope
- å…¶ä»–å…¼å®¹ OpenAI API çš„æœåŠ¡

#### ç¯å¢ƒå˜é‡

Docker Compose æ”¯æŒçš„ç¯å¢ƒå˜é‡ï¼š

```bash
HOST_PORT=8000          # ä¸»æœºç«¯å£æ˜ å°„
TZ=Asia/Shanghai        # æ—¶åŒºè®¾ç½®
FFMPEG_PATH=/usr/bin/ffmpeg  # FFmpeg è·¯å¾„ï¼ˆå¯é€‰ï¼‰
```

### ğŸ“– ä½¿ç”¨æŒ‡å—

#### 1. ç”ŸæˆåŠ¨ç”»

1. åœ¨ä¸»é¡µè¾“å…¥æ¡†è¾“å…¥çŸ¥è¯†ç‚¹ä¸»é¢˜ï¼ˆå¦‚"å‹¾è‚¡å®šç†"ã€"å…‰çš„æŠ˜å°„"ï¼‰
2. ç‚¹å‡»å‘é€æˆ–æŒ‰ Enter é”®
3. ç­‰å¾… AI ç”ŸæˆåŠ¨ç”»ä»£ç ï¼ˆé€šå¸¸éœ€è¦ 10-60 ç§’ï¼‰
4. é¢„è§ˆç”Ÿæˆçš„åŠ¨ç”»æ•ˆæœ

#### 2. å¤šè½®å¯¹è¯ä¼˜åŒ–

åœ¨èŠå¤©æ¡†ä¸­è¾“å…¥ä¿®æ”¹æ„è§ï¼Œä¾‹å¦‚ï¼š
- "è¯·å¢åŠ æ›´å¤šç¤ºä¾‹"
- "åŠ¨ç”»é€Ÿåº¦å¤ªå¿«ï¼Œè¯·æ”¾æ…¢ä¸€äº›"
- "å¢åŠ å¯¹å®šç†è¯æ˜è¿‡ç¨‹çš„è¯´æ˜"

#### 3. å¯¼å‡ºåŠ¨ç”»

- **åœ¨æ–°çª—å£æ‰“å¼€**ï¼šç‹¬ç«‹çª—å£é¢„è§ˆåŠ¨ç”»
- **ä¿å­˜ä¸º HTML**ï¼šä¸‹è½½å®Œæ•´çš„ HTML æ–‡ä»¶
- **å¯¼å‡ºä¸ºè§†é¢‘**ï¼šç”Ÿæˆ MP4 è§†é¢‘ï¼ˆéœ€è¦ FFmpegï¼‰

#### 4. è¯é¢˜å»ºè®®

ç³»ç»Ÿæä¾›å¤šä¸ªå­¦ç§‘çš„è¯é¢˜å»ºè®®ï¼š
- ç®—æ³•ï¼ˆå†’æ³¡æ’åºã€å¿«é€Ÿæ’åºã€Dijkstra ç®—æ³•ç­‰ï¼‰
- ç‰©ç†ï¼ˆå…‰çš„æŠ˜å°„ã€é‡å­éš§ç©¿ã€ç”µç£æ„Ÿåº”ç­‰ï¼‰
- åŒ–å­¦ï¼ˆé…¸ç¢±ä¸­å’Œã€æ°§åŒ–è¿˜åŸååº”ç­‰ï¼‰
- æ•°å­¦ï¼ˆå‹¾è‚¡å®šç†ã€å¾®ç§¯åˆ†åŸºæœ¬å®šç†ç­‰ï¼‰
- ç”Ÿç‰©ï¼ˆDNA å¤åˆ¶ã€å…‰åˆä½œç”¨ç­‰ï¼‰

### ğŸ”Œ API æ¥å£

#### POST /generate

ç”Ÿæˆæ•™å­¦åŠ¨ç”»ï¼ˆSSE æµå¼å“åº”ï¼‰

**è¯·æ±‚ä½“**ï¼š
```json
{
  "topic": "çŸ¥è¯†ç‚¹ä¸»é¢˜",
  "history": [
    {"role": "user", "content": "..."},
    {"role": "assistant", "content": "..."}
  ]
}
```

**å“åº”**ï¼šServer-Sent Events æµ

```
data: {"token": "<!DOCTYPE html>"}
data: {"token": "<html>..."}
...
data: {"event": "[DONE]"}
```

#### POST /record

å½•åˆ¶é¡µé¢å¹¶å¯¼å‡ºè§†é¢‘

**è¯·æ±‚ä½“**ï¼š
```json
{
  "html_text": "<html>...</html>",
  "width": 1280,
  "height": 720,
  "fps": 24,
  "mp4": true,
  "gif": false,
  "end_event": "recording:finished",
  "end_timeout": 180000
}
```

**å“åº”**ï¼š
```json
{
  "ok": true,
  "webm": "/path/to/recording.webm",
  "webm_url": "/recordings/recording.webm",
  "mp4": "/path/to/output.mp4",
  "mp4_url": "/output/output.mp4"
}
```

### ğŸ¨ ç”ŸæˆåŠ¨ç”»è§„èŒƒ

ç”Ÿæˆçš„ HTML åŠ¨ç”»éµå¾ªä»¥ä¸‹è§„èŒƒï¼š

1. **åˆ†è¾¨ç‡**ï¼šå›ºå®š 1280Ã—720 åƒç´ å®¹å™¨
2. **ç»“æ„**ï¼šå¼€åœºï¼ˆ5-10ç§’ï¼‰â†’ è®²è§£ï¼ˆ30-60ç§’ï¼‰â†’ æ”¶å°¾ï¼ˆ5-10ç§’ï¼‰
3. **å­—å¹•**ï¼šåŒè¯­å­—å¹•ï¼ˆä¸­æ–‡ + è‹±æ–‡ï¼‰
4. **é…è‰²**ï¼šæµ…è‰²ä¸»é¢˜ï¼Œå’Œè°æ˜“è¯»
5. **è‡ªåŠ¨æ’­æ”¾**ï¼šé¡µé¢åŠ è½½åè‡ªåŠ¨å¼€å§‹
6. **å®Œç»“æ ‡è®°**ï¼šåŠ¨ç”»ç»“æŸæ—¶è°ƒç”¨ `markAnimationFinished()`

### ğŸ› å¸¸è§é—®é¢˜

#### 1. API å¯†é’¥é”™è¯¯

**é”™è¯¯ä¿¡æ¯**ï¼š`è¯·åœ¨ credentials.json é‡Œé…ç½®æ­£ç¡®çš„ API_KEY`

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥ `credentials.json` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- ç¡®è®¤ `API_KEY` ä¸æ˜¯ `sk-REPLACE_ME`
- éªŒè¯ API å¯†é’¥æ˜¯å¦æœ‰æ•ˆ

#### 2. FFmpeg æœªæ‰¾åˆ°

**é”™è¯¯ä¿¡æ¯**ï¼š`æœªæ‰¾åˆ° ffmpegï¼Œå¯æ‰§è¡Œä¸åœ¨ PATH ä¸­`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å®‰è£… FFmpeg
sudo apt install ffmpeg  # Ubuntu/Debian
brew install ffmpeg      # macOS

# æˆ–è®¾ç½®ç¯å¢ƒå˜é‡
export FFMPEG_PATH=/path/to/ffmpeg
```

#### 3. Playwright æµè§ˆå™¨æœªå®‰è£…

**é”™è¯¯ä¿¡æ¯**ï¼š`æœªå®‰è£… Playwright å½•åˆ¶ç»„ä»¶`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
pip install playwright
playwright install chromium
playwright install-deps chromium
```

#### 4. ç”Ÿæˆçš„ HTML æ— æ•ˆ

**é”™è¯¯ä¿¡æ¯**ï¼š`è¿”å›çš„åŠ¨ç”»ä»£ç è§£æå¤±è´¥`

**è§£å†³æ–¹æ¡ˆ**ï¼š
- è°ƒæ•´æç¤ºè¯ï¼Œä½¿å…¶æ›´åŠ æ˜ç¡®
- å°è¯•é‡æ–°ç”Ÿæˆ
- æ£€æŸ¥æ¨¡å‹è¿”å›æ˜¯å¦å®Œæ•´

### ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼š`git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -m 'Add amazing feature'`
4. æ¨é€åˆ°åˆ†æ”¯ï¼š`git push origin feature/amazing-feature`
5. æäº¤ Pull Request

### ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚

### ğŸ™ è‡´è°¢

- [fogsight](https://github.com/fogsightai/fogsight) - é›¾è±¡æ˜¯ä¸€æ¬¾ç”±å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰é©±åŠ¨çš„åŠ¨ç”»å¼•æ“ agent 
- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£ Web æ¡†æ¶
- [Playwright](https://playwright.dev/) - æµè§ˆå™¨è‡ªåŠ¨åŒ–
- [FFmpeg](https://ffmpeg.org/) - è§†é¢‘å¤„ç†
- [GSAP](https://greensock.com/gsap/) - åŠ¨ç”»åº“



### ğŸ“ è”ç³»æˆ‘ä»¬

  ğŸ“¬ **è”ç³»æˆ‘**ï¼š

- é‚®ç®±ï¼š[75271002@qq.com](mailto:75271002@qq.com)

ğŸ”— **ç¤¾äº¤åª’ä½“**ï¼š

- ä¸ªäººé¡µï¼š[wwwzhouhui](https://github.com/wwwzhouhui)
- å…¬ä¼—å·ï¼š[wwzhouhui](https://mp.weixin.qq.com/cgi-bin/settingpage?t=setting/index&action=index&token=1416320806&lang=zh_CN)
- Bilibiliï¼š[æˆ‘çš„Bç«™ä¸»é¡µ](https://space.bilibili.com/1527002698)

â€‹        å¾®ä¿¡å·ï¼š

â€‹        ![image-20250906175827828](https://mypicture-1258720957.cos.ap-nanjing.myqcloud.com/Obsidian/image-20250906175827828.png)

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª â­ Starï¼**
